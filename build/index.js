!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function i(t){return Math.PI/180*t}var n;r.r(e),function(t){t[t.PRE=0]="PRE",t[t.POST=1]="POST"}(n||(n={}));class o{constructor(t){this.boundaryX=[0,t.width],this.boundaryY=[0,t.height],this.canvas=t,this.canvasHeight=t.height,this.canvasWidth=t.width,this.context=t.getContext("2d"),this.origin=[t.width/2,t.height/2],this.particles=new Set,this.threshold=10,this.listenerID=0,this.renderListeners=[],this.listenerMap=new Map,this.color=(()=>"white"),this.direction=this.default_direction_generator,this.speed=(()=>5),this.size=(()=>4)}tick(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.particles.add(new s(this,this.direction(),this.speed(),this.color(),this.size(),this.origin));for(let t of this.renderListeners)t.removed||t.type!==n.PRE||t(this);for(let t of this.particles)t.draw();for(let t of this.renderListeners)t.removed||t.type!==n.POST||t(this)}get_canvas(){return this.canvas}get_context(){return this.context}get_threshold(){return this.threshold}get_origin(){return this.origin}get_particle_count(){return this.particles.size}set_origin(t,e){this.origin[0]=t,this.origin[1]=e}set_speed(t){this.speed=t}set_direction(t){this.direction=t}set_color(t){this.color=t}set_size(t){this.size=t}add_pre_render_listener(t){t.listenerID=this.listenerID,t.type=n.PRE,t.removed=!1,this.renderListeners.push(t),this.listenerMap.set(t,this.listenerID++)}remove_render_listener(t){let e=this.listenerMap.get(t);return void 0!=e&&(this.renderListeners[e].removed=!0,!0)}exceed_boundary(t,e){let r=this.threshold,i=this.boundaryX,n=this.boundaryY;return t+r<i[0]||t-r>i[1]||(e+r<n[0]||e-r>n[1])}kill_particle(t){this.particles.delete(t)}default_direction_generator(){return Math.floor(360*Math.random())}}class s{constructor(t,e,r,i,n,o){this.color=i,this.coordinate=o.slice(),this.direction=e,this.emitter=t,this.size=n,this.speed=r}draw(){let t=this.color,e=this.direction,r=this.speed,n=this.size,o=this.emitter.get_context();"function"==typeof t&&(t=t(this)),"function"==typeof e&&(e=e(this)),"function"==typeof r&&(r=r(this)),"function"==typeof n&&(n=n(this));let s=this.coordinate[0]+r*Math.cos(i(e)),h=this.coordinate[1]+r*Math.sin(i(e));this.emitter.exceed_boundary(s,h)?this.destruct():(this.coordinate[0]=s,this.coordinate[1]=h,o.beginPath(),o.fillStyle=t,o.arc(s,h,n,0,2*Math.PI,!1),o.fill())}get_coordinate(){return this.coordinate.slice()}destruct(){this.emitter.kill_particle(this)}}!function(t){let e=document.getElementById("canvas"),r=document.getElementById("indicator"),i=new o(e);e.addEventListener("click",function(t){i.set_origin(t.pageX-e.offsetLeft,t.pageY-e.offsetTop)}),i.add_pre_render_listener(function(t){r.innerHTML=`Particle count: ${t.get_particle_count()}`}),i.set_direction(function(t){let e=0;const r=360-(t=t||1)-1;return()=>(e>r?e=0:e+=t,e)}(10)),i.set_color(function(t){return(t=Math.abs(t))?()=>{let e=Math.floor(155*Math.random())+100-t,r=Math.floor(155*Math.random())+100-t,i=Math.floor(155*Math.random())+100-t;return()=>`rgb(${Math.floor(2*Math.random()*t)+e}, ${Math.floor(2*Math.random()*t)+r}, ${Math.floor(2*Math.random()*t)+i})`}:()=>`rgb(${Math.floor(155*Math.random())+100}, ${Math.floor(155*Math.random())+100}, ${Math.floor(155*Math.random())+100})`}()),i.set_speed(function(t,e){t=Math.abs(t)||7,e=Math.abs(e)||100;let r=Math.log(t)*e;return()=>{let t=0;return()=>Math.exp(r/(t+++e))}}(5,20)),i.set_size(function(t){return(t=Math.abs(t))?()=>{let e=Math.max(3,Math.floor(10*Math.random()));return()=>{let r=Math.floor(t*Math.random());return e+r}}:()=>Math.max(3,Math.floor(10*Math.random()))}()),function e(){i.tick(),setTimeout(e,t)}()}(20)}]);
//# sourceMappingURL=index.js.map